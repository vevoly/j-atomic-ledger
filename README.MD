# j-atomic-ledger

> **A lightning-fast, crash-safe, in-memory transaction engine for Java.**
> ä¸€æ¬¾åŸºäº LMAX æ¶æ„çš„ Java é«˜æ€§èƒ½å†…å­˜äº¤æ˜“å¼•æ“ï¼Œå•æœºç™¾ä¸‡ TPSï¼Œæ”¯æŒ WAL æŒä¹…åŒ–ä¸ç§’çº§å´©æºƒæ¢å¤ã€‚

---
![img.png](img/img.png)
---
## ğŸ“– Introduction / é¡¹ç›®ç®€ä»‹

### ğŸ‡¨ğŸ‡³ ä¸­æ–‡
**j-atomic-ledger** æ˜¯ä¸€ä¸ªä¸“ä¸º **é«˜å¹¶å‘ï¼ˆHigh Concurrencyï¼‰** å’Œ **ä½å»¶è¿Ÿï¼ˆLow Latencyï¼‰** åœºæ™¯è®¾è®¡çš„é€šç”¨å†…å­˜äº¤æ˜“å¼•æ“ã€‚

åœ¨ä¼ ç»Ÿçš„é‡‘è/ç”µå•†æ¶æ„ä¸­ï¼Œæ•°æ®åº“è¡Œé”ï¼ˆRow Lockï¼‰å¾€å¾€æ˜¯åˆ¶çº¦ååé‡çš„æœ€å¤§ç“¶é¢ˆã€‚**j-atomic-ledger** é‡‡ç”¨ **å†…å­˜äº‹ä»¶æº¯æºï¼ˆIn-Memory Event Sourcingï¼‰** æ¶æ„ï¼Œå°†æ ¸å¿ƒè®¡ç®—ä»æ•°æ®åº“ç§»è‡³å†…å­˜ï¼Œé€šè¿‡ **Disruptor** å®ç°å•çº¿ç¨‹æ— é”å¤„ç†ï¼Œåˆ©ç”¨ **Chronicle Queue** å®ç°çº³ç§’çº§ WAL æŒä¹…åŒ–ï¼Œé…åˆ **Kryo** å†…å­˜å¿«ç…§æŠ€æœ¯ï¼Œå®ç°äº†**å•æœºç™¾ä¸‡çº§ TPS** çš„å¤„ç†èƒ½åŠ›ï¼ŒåŒæ—¶ä¿è¯äº†æ•°æ®çš„ç»å¯¹å®‰å…¨ä¸å¼ºä¸€è‡´æ€§ã€‚

å®ƒå¹¶ä¸æ˜¯è¦å–ä»£æ•°æ®åº“ï¼Œè€Œæ˜¯ä½œä¸ºæ•°æ®åº“çš„å‰ç½®é«˜æ€§èƒ½**å†™ç¼“å†²ä¸è®¡ç®—æ ¸å¿ƒ**ï¼Œç‰¹åˆ«é€‚ç”¨äº**æ”¯ä»˜ç»“ç®—ã€è®¢å•æ’®åˆã€ç§’æ€åº“å­˜æ‰£å‡ã€è´¦å˜**ç­‰å¯¹å¹¶å‘è¦æ±‚æé«˜çš„åœºæ™¯ã€‚

### ğŸ‡ºğŸ‡¸ English
**j-atomic-ledger** is a generic in-memory transaction engine designed for **High Concurrency** and **Low Latency** scenarios.

In traditional financial/e-commerce architectures, database row locks are often the biggest bottleneck limiting throughput. **j-atomic-ledger** adopts the **In-Memory Event Sourcing** architecture. It moves core calculations from the database to memory, achieving **Single-Node Million-Level TPS** via **Disruptor** (lock-free processing), **Chronicle Queue** (nanosecond-level WAL persistence), and **Kryo** (fast memory snapshot). It ensures absolute data safety and strong consistency.

It is not intended to replace the database but serves as a high-performance **Write Buffer & Computation Core** in front of it. It is ideal for scenarios such as **Payment Settlement, Order Matching, Flash Sales (Seckill), and Ledger Systems**.

---

## âœ¨ Key Features / æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **æè‡´æ€§èƒ½ (Extreme Performance)**: åŸºäº LMAX Disruptor ç¯å½¢é˜Ÿåˆ—ï¼Œå•çº¿ç¨‹æ— é”ä¸²è¡Œæ‰§è¡Œï¼Œæ¶ˆé™¤ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå•æœºè½»æ¾çªç ´ 100ä¸‡+ TPSã€‚
- ğŸ’¾ **æ•°æ®å®‰å…¨ (Crash Safe)**: é‡‡ç”¨ Write-Ahead Log (WAL) æœºåˆ¶ï¼Œæ¯ç¬”äº¤æ˜“å…ˆè½ç›˜å†å†…å­˜è®¡ç®—ï¼Œæ”¯æŒæ–­ç”µé›¶ä¸¢å¤±ã€‚
- ğŸ“¸ **ç§’çº§æ¢å¤ (Fast Recovery)**: è‡ªåŠ¨åŒ–çš„å†…å­˜å¿«ç…§ (Snapshot) ä¸å¢é‡æ—¥å¿—é‡æ”¾æœºåˆ¶ï¼ŒæœåŠ¡é‡å¯è€—æ—¶ä»…éœ€æ•°ç§’ã€‚
- ğŸ›¡ï¸ **å¹‚ç­‰å»é‡ (Idempotency)**: å†…ç½®åŸºäº BloomFilter å’Œ LRU çš„é«˜æ€§èƒ½å»é‡ç­–ç•¥ï¼Œé˜²æ­¢é‡å¤äº¤æ˜“ã€‚
- ğŸŒŠ **å‰Šå³°å¡«è°· (Backpressure)**: å†…å­˜è®¡ç®—å®Œæ¯•åï¼Œé€šè¿‡å¼‚æ­¥æ‰¹é‡æ–¹å¼è½åº“ï¼Œä¿æŠ¤åç«¯æ•°æ®åº“ä¸è¢«æµé‡æ´ªå³°å‡»ç©¿ã€‚
- ğŸ”Œ **å¼€ç®±å³ç”¨ (Easy Integration)**: æä¾› Spring Boot Starterï¼Œé›¶é…ç½®å³å¯åµŒå…¥ç°æœ‰é¡¹ç›®ï¼Œæ¥å…¥Prometheus + Grafanaã€‚

---

## ğŸ—ï¸ Architecture / æ¶æ„å¯¹æ¯”

| ç»´åº¦ | ç°æœ‰æ¶æ„ (Traditional) | **j-atomic-ledger** | **æ”¶ç›Š** |
| :--- | :--- | :--- | :--- |
| **å¹¶å‘æ¨¡å‹** | å¤šçº¿ç¨‹ + æ•°æ®åº“è¡Œé” | **å•çº¿ç¨‹ + å†…å­˜æ— é”** | æ— æ­»é”é£é™©ï¼Œæ€§èƒ½çº¿æ€§å¢é•¿ |
| **æŒä¹…åŒ–** | åŒæ­¥å†™ MySQL | **åŒæ­¥å†™ WAL + å¼‚æ­¥å†™ MySQL** | I/O å»¶è¿Ÿé™ä½ 1000 å€ |
| **æ•°æ®ä¸€è‡´æ€§** | å¼ºä¸€è‡´æ€§ (ACID) | **æœ€ç»ˆä¸€è‡´æ€§ (Base)** | ç‰ºç‰²å¾®ç§’çº§å»¶è¿Ÿï¼Œæ¢å–æé«˜å¯ç”¨æ€§ |
| **å»é‡ä¾èµ–** | æŸ¥æ•°æ®åº“/Redis | **å†…å­˜è®¡ç®— (Bloom/LRU)** | 0 ç½‘ç»œå¼€é”€ |
| **å•æœº TPS** | ~2,000 | **1,000,000+** | **500 å€æå‡** |

---

## ğŸ¯ Use Cases / é€‚ç”¨åœºæ™¯

1.  **é‡‘èè´¦æˆ·ç³»ç»Ÿ**: é’±åŒ…ä½™é¢æ‰£å‡ã€è½¬è´¦ã€å……å€¼ã€‚
2.  **äº¤æ˜“æ’®åˆå¼•æ“**: è‚¡ç¥¨ã€åŠ å¯†è´§å¸ã€NFT äº¤æ˜“æ’®åˆã€‚
3.  **ç”µå•†ç§’æ€ä¸­å¿ƒ**: é«˜å¹¶å‘åº“å­˜æ‰£å‡ï¼ˆé˜²è¶…å–ï¼‰ã€‚
4.  **æ¸¸æˆç»æµç³»ç»Ÿ**: é“å…·å‘æ”¾ã€é‡‘å¸æµè½¬ã€ç§¯åˆ†ç»“ç®—ã€‚

---

## ğŸ“¦ Installation / å®‰è£…

*(Coming Soon)*

## ğŸ“„ License

Apache License 2.0